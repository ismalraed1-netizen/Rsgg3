<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุฏูุฑุฉ ุชุตููู ูุงุจุงุช FiveM | ูู ุงูุตูุฑ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Tajawal', sans-serif;
        }
        .lesson-content h2 {
            font-size: 1.8rem;
            font-weight: 800;
            color: #fca311; /* FiveM Orange-ish */
            margin-bottom: 1rem;
        }
        .lesson-content h3 {
            font-size: 1.4rem;
            font-weight: 700;
            color: #e5e5e5;
            margin-top: 1.5rem;
            margin-bottom: 0.5rem;
            border-right: 4px solid #fca311;
            padding-right: 10px;
        }
        .lesson-content p {
            line-height: 1.8;
            color: #d1d5db;
            margin-bottom: 1rem;
        }
        .lesson-content ul {
            list-style-type: disc;
            margin-right: 1.5rem;
            color: #d1d5db;
            margin-bottom: 1rem;
        }
        .lesson-content li {
            margin-bottom: 0.5rem;
        }
        .code-block {
            direction: ltr;
            background: #1f2937;
            padding: 1rem;
            border-radius: 0.5rem;
            font-family: monospace;
            color: #a5f3fc;
            overflow-x: auto;
            border: 1px solid #374151;
        }
        .step-card {
            background: rgba(255, 255, 255, 0.05);
            padding: 1rem;
            border-radius: 0.5rem;
            margin-bottom: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #111827;
        }
        ::-webkit-scrollbar-thumb {
            background: #4b5563;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #fca311;
        }
        .active-tab {
            background-color: #fca311;
            color: #000;
            font-weight: bold;
        }
        /* AI Tool Styles */
        .ai-response-area {
            background-color: #111827;
            border: 1px solid #374151;
            border-radius: 0.5rem;
            padding: 1rem;
            margin-top: 1rem;
            min-height: 100px;
            white-space: pre-wrap;
        }
        .sparkle-btn {
            background: linear-gradient(45deg, #fca311, #fbbf24);
            transition: all 0.3s ease;
        }
        .sparkle-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(252, 163, 17, 0.5);
        }
        .loading-dots:after {
            content: '.';
            animation: dots 1.5s steps(5, end) infinite;
        }
        @keyframes dots {
            0%, 20% { color: rgba(0,0,0,0); text-shadow: .25em 0 0 rgba(0,0,0,0), .5em 0 0 rgba(0,0,0,0);}
            40% { color: white; text-shadow: .25em 0 0 rgba(0,0,0,0), .5em 0 0 rgba(0,0,0,0);}
            60% { text-shadow: .25em 0 0 white, .5em 0 0 rgba(0,0,0,0);}
            80%, 100% { text-shadow: .25em 0 0 white, .5em 0 0 white;}
        }
    </style>
</head>
<body class="bg-gray-900 text-white h-screen flex flex-col md:flex-row overflow-hidden">

    <!-- Mobile Header -->
    <div class="md:hidden flex justify-between items-center p-4 bg-gray-800 border-b border-gray-700 z-50">
        <h1 class="text-xl font-bold text-yellow-500">FiveM Mapper</h1>
        <button id="menuBtn" class="text-white focus:outline-none">
            <i class="fas fa-bars fa-lg"></i>
        </button>
    </div>

    <!-- Sidebar Navigation -->
    <aside id="sidebar" class="w-full md:w-1/4 lg:w-1/5 bg-gray-800 border-l border-gray-700 flex-col absolute md:relative h-full z-40 transform translate-x-full md:translate-x-0 transition-transform duration-300 ease-in-out flex">
        <div class="p-6 border-b border-gray-700 hidden md:block">
            <h1 class="text-2xl font-bold text-yellow-500"><i class="fas fa-map-marked-alt ml-2"></i>ุฏูุฑุฉ ุงููุงุจูุฌ</h1>
            <p class="text-xs text-gray-400 mt-1">ูู ุงูุตูุฑ ุฅูู ุงูุงุญุชุฑุงู</p>
        </div>
        
        <nav class="flex-1 overflow-y-auto p-4 space-y-2">
            <!-- Navigation Items will be injected here -->
        </nav>

        <div class="p-4 border-t border-gray-700 text-center text-xs text-gray-500">
            ุชู ุงูุชุทููุฑ ุจูุงุณุทุฉ Gemini API โจ
        </div>
    </aside>

    <!-- Main Content Area -->
    <main class="flex-1 bg-gray-900 relative overflow-hidden flex flex-col w-full">
        <div id="contentArea" class="flex-1 overflow-y-auto p-6 md:p-10 max-w-4xl mx-auto w-full">
            <!-- Content will be injected here -->
        </div>
    </main>

    <script>
        // API Configuration
        const apiKey = ""; // Set by environment

        // Lesson Data
        const lessons = [
            {
                id: 1,
                title: "ุงูููุฏูุฉ ูุงูุฃุฏูุงุช ุงููุทููุจุฉ",
                icon: "fa-toolbox",
                type: "lesson",
                content: `
                    <h2>ูุฑุญุจุงู ุจู ูู ุนุงูู ุชุตููู ูุงุจุงุช FiveM</h2>
                    <p>ูุจู ุงูุจุฏุกุ ูุฌุจ ุฃู ุชุนูู ุฃู ุชุตููู ุงููุงุจุงุช (Mapping) ูููุณู ุฅูู ููุนูู ุฑุฆูุณููู:</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                        <div class="step-card border-l-4 border-blue-500">
                            <h4 class="font-bold text-blue-400">1. YMAP (ุงูุฃุณุงุณู)</h4>
                            <p class="text-sm">ูู ูุถุน ูุฌุณูุงุช (Props) ููุฌูุฏุฉ ุฃุตูุงู ูู ุงููุนุจุฉุ ูุซู ุงูุญูุงุฌุฒุ ุงูุฃุดุฌุงุฑุ ูุงููุฑุงุณูุ ูุชุฑุชูุจูุง ูุตูุน ุดูู ุฌุฏูุฏ.</p>
                        </div>
                        <div class="step-card border-l-4 border-purple-500">
                            <h4 class="font-bold text-purple-400">2. MLO (ุงููุชูุฏู)</h4>
                            <p class="text-sm">ูู ุตูุน ูุจุงูู ุฏุงุฎููุฉ (Interiors) ููููู ุงูุฏุฎูู ุฅูููุงุ ููุชุทูุจ ุจุฑุงูุฌ ุชุตููู ุซูุงุซู ุงูุฃุจุนุงุฏ ูุซู Blender ุฃู 3ds Max.</p>
                        </div>
                    </div>
                    
                    <h3>ุงูุฃุฏูุงุช ุงูุชู ุณุชุญุชุงุฌูุง (ุฅุฌุจุงุฑู):</h3>
                    <ul class="list-disc pr-5">
                        <li><strong>CodeWalker:</strong> ุงูุจุฑูุงูุฌ ุงูุฃุณุงุณู ุงูุฐู ุณูุณุชุฎุฏูู ูู ูุฐู ุงูุฏูุฑุฉ. ูู ุงููุญุฑู ุงูุฐู ูุชูุญ ูู ุฑุคูุฉ ุฎุฑูุทุฉ GTA V ูุงูุชุนุฏูู ุนูููุง ูุจุงุดุฑุฉ.</li>
                        <li><strong>ูุณุฎุฉ GTA V ุฃุตููุฉ:</strong> ูุญุชุงุฌ CodeWalker ููููุงุช ุงููุนุจุฉ ุงูุฃุตููุฉ ููุนูู.</li>
                        <li><strong>FiveM:</strong> ูุชุฌุฑุจุฉ ุงููุงุจุงุช ุงูุฎุงุตุฉ ุจู.</li>
                    </ul>

                    <h3>ูุตูุญุฉ ุฐูุจูุฉ:</h3>
                    <p>ูุฐู ุงูุฏูุฑุฉ ุณุชุฑูุฒ ุนูู CodeWalker ูุฃูู ุงูุฃุณุงุณ ูุฃู ูุตูู ูุงุจุงุช. ุฅุฐุง ุฃุชููุชูุ ููููู ุงูุงูุชูุงู ูููุฑุงุญู ุงููุชูุฏูุฉ ุจุณูููุฉ.</p>
                `
            },
            {
                id: 2,
                title: "ุชุซุจูุช ูุถุจุท CodeWalker",
                icon: "fa-download",
                type: "lesson",
                content: `
                    <h2>ุงูุฎุทูุฉ ุงูุฃููู: ุชุฌููุฒ ูุฑุดุฉ ุงูุนูู</h2>
                    <p>ุจุฏูู ุจุฑูุงูุฌ CodeWalkerุ ูุง ููุฌุฏ ูุงุจูุฌ. ุฏุนูุง ูุซุจุชู ุจุงูุทุฑููุฉ ุงูุตุญูุญุฉ.</p>
                    
                    <h3>ุฎุทูุงุช ุงูุชุซุจูุช:</h3>
                    <div class="space-y-4">
                        <div class="step-card">
                            <span class="font-bold text-yellow-500">1. ุงูุชุญููู:</span>
                            <p>ูู ุจุงูุจุญุซ ูู ุฌูุฌู ุนู "CodeWalker GTA5 releases" ูุงุฏุฎู ุนูู ุฑุงุจุท ูููุน GitHub. ุญูู ุขุฎุฑ ูุณุฎุฉ (ุชููู ุจุตูุบุฉ zip).</p>
                        </div>
                        <div class="step-card">
                            <span class="font-bold text-yellow-500">2. ูู ุงูุถุบุท:</span>
                            <p>ูู ุจุฅูุดุงุก ูุฌูุฏ ุฌุฏูุฏ ุนูู ุณุทุญ ุงูููุชุจ ุจุงุณู "CodeWalker" ููู ุถุบุท ุงููููุงุช ุจุฏุงุฎูู.</p>
                        </div>
                        <div class="step-card">
                            <span class="font-bold text-yellow-500">3. ุงูุชุดุบูู ุงูุฃูู:</span>
                            <p>ุงูุชุญ ููู <code>CodeWalker.exe</code>. ุนูุฏ ุงููุชุญ ูุฃูู ูุฑุฉุ ุณูุทูุจ ููู ุชุญุฏูุฏ ูุณุงุฑ ูุนุจุฉ GTA V. ุงุฎุชุฑ ุงููุฌูุฏ ุงูุฐู ุซุจุชุช ููู ุงููุนุจุฉ.</p>
                        </div>
                    </div>

                    <h3>ูุงุฌูุฉ ุงูุจุฑูุงูุฌ:</h3>
                    <p>ุนูุฏูุง ููุชุญ ุงูุจุฑูุงูุฌุ ุณุชุฌุฏ ููุณู ุชุทูุฑ ููู ุฎุฑูุทุฉ ููุณ ุณุงูุชูุณ. ุงูุชุธุฑ ุญุชู ูุชู ุชุญููู ุงูุชูุณุชุดุฑุฒ (Textures) ุจุงููุงูู.</p>
                    <p class="text-red-400 text-sm"><i class="fas fa-exclamation-triangle ml-1"></i> ููุงุญุธุฉ: ุงูุจุฑูุงูุฌ ูุฏ ูููู ุซูููุงู ููููุงู ุญุณุจ ููุงุตูุงุช ุฌูุงุฒู.</p>
                `
            },
            {
                id: 3,
                title: "ุฃุณุงุณูุงุช ุงูุชุญูู ูุงูุชุญุฑูู",
                icon: "fa-gamepad",
                type: "lesson",
                content: `
                    <h2>ููู ุชุชุญุฑู ุฏุงุฎู CodeWalkerุ</h2>
                    <p>ุงูุชุญูู ูุดุงุจู ุฌุฏุงู ููุนุจุฉ ููุณูุง ูุน ุจุนุถ ุงููุฑููุงุช ุงูุจุณูุทุฉ ููุชุทููุฑ.</p>

                    <h3>ุฃุฒุฑุงุฑ ุงูุชุญูู (Keyboard):</h3>
                    <div class="grid grid-cols-2 gap-2 text-sm">
                        <div class="bg-gray-800 p-2 rounded">W, A, S, D</div>
                        <div class="bg-gray-800 p-2 rounded">ูุชุญุฑูู ุงููุงููุฑุง (ุฃูุงูุ ูุณุงุฑุ ุฎููุ ูููู)</div>
                        
                        <div class="bg-gray-800 p-2 rounded">ุงูุฒุฑ ุงูุฃููู ูููุฃุฑุฉ (Hold)</div>
                        <div class="bg-gray-800 p-2 rounded">ููุชูุฌูู ูุงูุฏูุฑุงู</div>
                        
                        <div class="bg-gray-800 p-2 rounded">Q / E</div>
                        <div class="bg-gray-800 p-2 rounded">ููุตุนูุฏ ูุงููุจูุท ุจุงููุงููุฑุง</div>
                        
                        <div class="bg-gray-800 p-2 rounded">Shift</div>
                        <div class="bg-gray-800 p-2 rounded">ูุฒูุงุฏุฉ ุณุฑุนุฉ ุงูุญุฑูุฉ</div>
                        
                        <div class="bg-gray-800 p-2 rounded">T</div>
                        <div class="bg-gray-800 p-2 rounded">ูุฅุธูุงุฑ ุดุฑูุท ุงูุฃุฏูุงุช (Toolbar) - ููู ุฌุฏุงู!</div>
                    </div>

                    <h3>ููููุฉ ุงุฎุชูุงุฑ ูุชุญุฑูู ุงูุฃุดูุงุก:</h3>
                    <ol class="list-decimal pr-5 mt-4 space-y-2">
                        <li>ุงุถุบุท ุนูู ุญุฑู <strong>T</strong> ููุชุญ ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ.</li>
                        <li>ุงุถุบุท ุนูู ุงูุณูู ุงูุฃุณูุฏ ุงูุตุบูุฑ ูู ุงููุงุฆูุฉ ุงูุนูููุฉ (Select Tool).</li>
                        <li>ุงุถุบุท <strong>ุงูุฒุฑ ุงูุฃููู ูููุฃุฑุฉ</strong> ุนูู ุฃู ูุฌุณู ูู ุงูุนุงูู ูุงุฎุชูุงุฑู (ุณูุตุจุญ ูููู ุฃุฎุถุฑ ุฃู ุฃุจูุถ).</li>
                        <li>ุงุณุชุฎุฏู ุงูุฃุณูู ุงูููููุฉ (ุงูุชู ุชุณูู Gizmo) ูุชุญุฑูู ุงููุฌุณู:
                            <ul class="list-disc pr-5 mt-1 text-gray-400 text-xs">
                                <li><strong>ุงูุฃุฒุฑู:</strong> ููู/ุชุญุช</li>
                                <li><strong>ุงูุฃุญูุฑ:</strong> ูููู/ูุณุงุฑ</li>
                                <li><strong>ุงูุฃุฎุถุฑ:</strong> ุฃูุงู/ุฎูู</li>
                            </ul>
                        </li>
                    </ol>
                `
            },
            {
                id: 4,
                title: "ุฅูุดุงุก ุฃูู ูุดุฑูุน (YMAP)",
                icon: "fa-hammer",
                type: "lesson",
                content: `
                    <h2>ุงูุชุทุจูู ุงูุนููู: ูุถุน ุญุงุฌุฒ ุนูู ุงูุทุฑูู</h2>
                    <p>ุณูููู ุงูุขู ุจุฅูุดุงุก ููู ูุงุจ ุฌุฏูุฏ ูุฅุถุงูุฉ ุญุงุฌุฒ ุฃููู ุจุณูุท.</p>

                    <h3>1. ุฅูุดุงุก ููู ุงููุดุฑูุน (New Ymap):</h3>
                    <p>ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ (ุจุนุฏ ุถุบุท T)ุ ุงุฐูุจ ุฅูู ุชุจููุจ <strong>Project</strong>:</p>
                    <ul class="list-disc pr-5 mb-4">
                        <li>ุงุถุบุท <strong>New</strong>.</li>
                        <li>ุงุฎุชุฑ <strong>Ymap File</strong>.</li>
                        <li>ุณุธูุฑ ูู ููู ุฌุฏูุฏ ูู ุงููุงุฆูุฉ ุจุงุณู <code>map1.ymap</code> (ููููู ุชุบููุฑ ุงุณูู ูุงุญูุงู).</li>
                    </ul>

                    <h3>2. ุฅุถุงูุฉ ูุฌุณู (Entity):</h3>
                    <p>ุงูุขูุ ุชุฃูุฏ ุฃูู ุงุฎุชุฑุช ููู ุงูู Ymap ุงูุฌุฏูุฏ (ุธููู ุจุงูุฃุฒุฑู ูู ุงููุงุฆูุฉ)ุ ุซู:</p>
                    <ul class="list-disc pr-5 mb-4">
                        <li>ุงุฐูุจ ูุชุจููุจ <strong>Ymap</strong>.</li>
                        <li>ุงุถุบุท <strong>New Entity</strong>.</li>
                        <li>ุณูุธูุฑ ูู "ุจูุถ" ุงูุชุฑุงุถู. ูู ุฎุงูุฉ <strong>Archetype</strong>ุ ุงูุชุจ ุงุณู ุงููุฌุณู ุงูุฐู ุชุฑูุฏู.</li>
                        <li>ุฌุฑุจ ูุชุงุจุฉ: <code>prop_barrier_work05</code> ูุงุถุบุท Enter.</li>
                        <li>ุณูุชุญูู ุงูุดูู ุฅูู ุญุงุฌุฒ ุทุฑูู.</li>
                    </ul>

                    <h3>3. ุงูุชุซุจูุช ูุงูุญูุธ:</h3>
                    <p>ุญุฑู ุงูุญุงุฌุฒ ููููุงู ุงููุทููุจ. ุนูุฏูุง ุชูุชูู:</p>
                    <ul class="list-disc pr-5 mb-4">
                        <li>ุงุฐูุจ ูุชุจููุจ <strong>Project</strong> ูุฑุฉ ุฃุฎุฑู.</li>
                        <li>ุงุถุบุท <strong>Tools</strong> ุซู <strong>Manifest Generator</strong> ุซู <strong>Generate</strong> (ูุฐุง ูุถูุงู ุธููุฑ ุงููุงุจ).</li>
                        <li>ุงุถุบุท <strong>Save</strong> ูุงุฎุชุฑ ููุงูุงู ูุญูุธ ููู <code>.ymap</code>.</li>
                    </ul>
                    
                    <div class="bg-yellow-900/50 p-4 rounded border border-yellow-600">
                        <strong>ููู ุฌุฏุงู:</strong> ุชุฃูุฏ ุฏุงุฆูุงู ูู ุถุบุท <strong>Calculate Extents</strong> ูู ุฎุตุงุฆุต ุงูู Ymap ูุจู ุงูุญูุธุ ูุฅูุง ุณูุฎุชูู ุงููุงุจ ุนูุฏูุง ุชุจุชุนุฏ ุนูู ูู ุงููุนุจุฉ.
                    </div>
                `
            },
            {
                id: 5,
                title: "ุชุฑููุจ ุงููุงุจ ูู ุงูุณูุฑูุฑ",
                icon: "fa-server",
                type: "lesson",
                content: `
                    <h2>ููู ุงูุนูู ุฅูู FiveM</h2>
                    <p>ุงูุขู ูุฏูู ููู <code>mymap.ymap</code>. ููู ูุฌุนูู ูุธูุฑ ูู ุงูุณูุฑูุฑุ</p>

                    <h3>ููููุฉ ุงููููุงุช (Folder Structure):</h3>
                    <p>ูุฌุจ ุฃู ูููู ูุฌูุฏ ุงููุงุจ ุจูุฐุง ุงูุดูู ุชูุงูุงู:</p>
                    <div class="code-block">
mymap_folder/
โโโ stream/
โ   โโโ mymap.ymap  <-- ูููู ููุถุน ููุง
โโโ fxmanifest.lua
                    </div>

                    <h3>ููู ุงูุชุนุฑูู (fxmanifest.lua):</h3>
                    <p>ูู ุจุฅูุดุงุก ููู ูุตู ุฌุฏูุฏ ูุณููู <code>fxmanifest.lua</code> ูุถุน ุจุฏุงุฎูู ุงูููุฏ ุงูุชุงูู:</p>
                    <div class="code-block">
fx_version 'cerulean'
game 'gta5'

this_is_a_map 'yes'

files {
    'stream/*.ymap'
}
                    </div>

                    <h3>ุงูุชุดุบูู:</h3>
                    <ol class="list-decimal pr-5 mt-4">
                        <li>ุงููู ูุฌูุฏ <code>mymap_folder</code> ุฅูู ูุฌูุฏ <code>resources</code> ูู ุณูุฑูุฑู.</li>
                        <li>ุงูุชุญ ููู <code>server.cfg</code>.</li>
                        <li>ุฃุถู ุงูุณุทุฑ: <code>ensure mymap_folder</code>.</li>
                        <li>ุดุบู ุงูุณูุฑูุฑ ููุจุฑูู ุนููู ุงููุงุจ ุงูุฃูู!</li>
                    </ol>
                `
            },
            {
                id: 6,
                title: "ูุตุงุฆุญ ูููุญุชุฑููู",
                icon: "fa-star",
                type: "lesson",
                content: `
                    <h2>ุฃุณุฑุงุฑ ุชุฌุนู ูุงุจุงุชู ุฃูุถู</h2>
                    
                    <h3>1. ุนุฏู ุงูุชุนุงุฑุถ (Flickering):</h3>
                    <p>ุฅุฐุง ูุถุนุช ุฃุฑุถูุฉ ููู ุฃุฑุถูุฉ ููุฌูุฏุฉุ ุณูุญุฏุซ ุชูุทูุน (ููููุฑ) ูุฒุนุฌ. ุงูุญู ูู ุฑูุน ุฃุฑุถูุชู ููููุงู ุฌุฏุงู (ุจููุฏุงุฑ 0.01) ุฃู ุฅุฒุงูุฉ ุงูุฃุฑุถูุฉ ุงูุฃุตููุฉ ุจุงุณุชุฎุฏุงู ุฎุงุตูุฉ Occlusion (ูุชูุฏู).</p>

                    <h3>2. ุงูุชุตุงุฏู (Collision):</h3>
                    <p>ุจุนุถ ุงููุฌุณูุงุช ูู CodeWalker ููุณ ููุง ุชุตุงุฏู (ุชุณุชุทูุน ุงููุดู ุฎูุงููุง). ุชุฃูุฏ ุฏุงุฆูุงู ูู ุชุฌุฑุจุฉ ุงููุงุจ. ุฅุฐุง ุฃุฑุฏุช ุฅุถุงูุฉ ุชุตุงุฏูุ ุณุชุญุชุงุฌ ูุงุณุชุฎุฏุงู ุฎุงุตูุฉ ุงูู Static Collision.</p>

                    <h3>3. ุงูุฃุฏุงุก (FPS):</h3>
                    <p>ูุง ุชุจุงูุบ ูู ูุถุน ุงูุฃุดุฌุงุฑ ูุงูุฃุถูุงุก ูู ููุงู ุถูู. ูุฐุง ูุณุจุจ ุฏุฑูุจ ูุฑูู ููุงุนุจูู (Lag). ูุฒุน ุงูุฃุดูุงุก ุจุญููุฉ.</p>

                    <h3>ููู ุฃุฌุฏ ุฃุณูุงุก ุงููุฌุณูุงุชุ</h3>
                    <p>ุงุณุชุฎุฏู ูููุน <strong>GTA5 Objects Database</strong> (ุงุจุญุซ ุนูู ูู ุฌูุฌู). ูุญุชูู ุนูู ุตูุฑ ูุฃุณูุงุก ููู ุบุฑุถ ูู ุงููุนุจุฉ ูุชุณููู ุงูุจุญุซ.</p>
                `
            },
            {
                id: 7,
                title: "ุงููุณุงุนุฏ ุงูุฐูู ูููุงุจูุฌ",
                icon: "fa-magic",
                type: "ai-tool",
                content: ""
            }
        ];

        const navContainer = document.querySelector('nav');
        const contentArea = document.getElementById('contentArea');
        const menuBtn = document.getElementById('menuBtn');
        const sidebar = document.getElementById('sidebar');

        // AI Tool HTML Content
        const aiToolHTML = `
            <h2><i class="fas fa-magic text-yellow-500 ml-2"></i>ุงููุณุงุนุฏ ุงูุฐูู ูููุงุจูุฌ โจ</h2>
            <p>ูู ุชุจุญุซ ุนู ุฃุณูุงุก ูุฌุณูุงุช (Props) ูููุฑุฉ ูุนููุฉุ ุฃู ูุงุฌูุชู ูุดููุฉ ูู ุงูููุฏุ ุงุณุฃู ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุงููุฎุชุต ุจู FiveM.</p>
            
            <div class="grid grid-cols-1 gap-6 mt-6">
                <!-- Suggestion Mode -->
                <div class="step-card border-r-4 border-yellow-500">
                    <h3 class="font-bold text-yellow-400 mb-2">๐ก ุงูุชุฑุงุญ ูุฌุณูุงุช ูุฃููุงุฑ</h3>
                    <p class="text-xs text-gray-400 mb-3">ูุซุงู: "ุฃุนุทูู ูุงุฆูุฉ ุจุฑูุจุณ ูุนูู ููุทุฉ ุชูุชูุด ุนุณูุฑูุฉ ููุฌูุฑุฉ"</p>
                    <div class="flex flex-col gap-2">
                        <textarea id="aiPromptIdea" rows="2" class="w-full bg-gray-800 border border-gray-600 rounded p-2 text-white focus:border-yellow-500 outline-none" placeholder="ุงูุชุจ ููุฑุชู ููุง..."></textarea>
                        <button onclick="askGemini('idea')" class="sparkle-btn text-black font-bold py-2 px-4 rounded shadow-lg flex justify-center items-center">
                            <span id="btnTextIdea">โจ ุงูุชุฑุญ ูู ุฃููุงุฑ</span>
                        </button>
                    </div>
                </div>

                <!-- Troubleshoot Mode -->
                <div class="step-card border-r-4 border-blue-500">
                    <h3 class="font-bold text-blue-400 mb-2">๐ง ุญู ูุดุงูู ุงููุงุจูุฌ</h3>
                    <p class="text-xs text-gray-400 mb-3">ูุซุงู: "ุงููุฌุณู ูุฎุชูู ููุง ุฃุจุนุฏ ุนูู" ุฃู "ููู ุฃุญู ูุดููุฉ ุงูููููุฑ ูู ุงูุฃุฑุถูุฉุ"</p>
                    <div class="flex flex-col gap-2">
                        <textarea id="aiPromptFix" rows="2" class="w-full bg-gray-800 border border-gray-600 rounded p-2 text-white focus:border-blue-500 outline-none" placeholder="ุงุดุฑุญ ูุดููุชู..."></textarea>
                        <button onclick="askGemini('fix')" class="bg-blue-600 hover:bg-blue-500 text-white font-bold py-2 px-4 rounded shadow-lg flex justify-center items-center transition">
                            <span id="btnTextFix">๐๏ธ ุญู ุงููุดููุฉ</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Output Area -->
            <div id="aiOutputContainer" class="hidden mt-6 animate-fade-in">
                <h3 class="text-gray-300 font-bold mb-2">ุงูุฅุฌุงุจุฉ:</h3>
                <div id="aiOutput" class="ai-response-area text-sm leading-relaxed text-gray-200"></div>
            </div>
        `;

        // Render Sidebar Navigation
        function renderNav() {
            navContainer.innerHTML = '';
            lessons.forEach((lesson, index) => {
                const btn = document.createElement('button');
                btn.className = `w-full text-right p-3 rounded-lg mb-1 transition-all duration-200 flex items-center ${index === 0 ? 'active-tab' : 'text-gray-300 hover:bg-gray-700 hover:text-white'}`;
                
                // Add sparkle emoji for AI tool
                const titleText = lesson.type === 'ai-tool' ? `${lesson.title} โจ` : lesson.title;
                const activeClass = lesson.type === 'ai-tool' ? 'text-yellow-400' : '';

                btn.innerHTML = `<i class="fas ${lesson.icon} w-8 text-center ml-2 ${activeClass}"></i> ${titleText}`;
                btn.onclick = () => loadLesson(index);
                navContainer.appendChild(btn);
            });
        }

        // Load Lesson Content
        function loadLesson(index) {
            const lesson = lessons[index];
            
            // Update Sidebar Active State
            const buttons = navContainer.querySelectorAll('button');
            buttons.forEach(b => {
                b.className = 'w-full text-right p-3 rounded-lg mb-1 transition-all duration-200 flex items-center text-gray-300 hover:bg-gray-700 hover:text-white';
            });
            buttons[index].className = 'w-full text-right p-3 rounded-lg mb-1 transition-all duration-200 flex items-center active-tab shadow-lg transform scale-[1.02]';

            // Check if it's the AI tool or a regular lesson
            let mainContent = '';
            if (lesson.type === 'ai-tool') {
                mainContent = aiToolHTML;
            } else {
                mainContent = `
                    <div class="flex items-center mb-6 border-b border-gray-700 pb-4">
                        <div class="p-3 bg-yellow-500 rounded-full text-black ml-4">
                            <i class="fas ${lesson.icon} fa-2x"></i>
                        </div>
                        <h1 class="text-3xl font-bold text-white">${lesson.title}</h1>
                    </div>
                    ${lesson.content}
                    <div class="mt-8 pt-6 border-t border-gray-700 flex justify-between">
                        ${index > 0 ? `<button onclick="loadLesson(${index - 1})" class="bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded text-sm">ุงูุณุงุจู</button>` : '<div></div>'}
                        ${index < lessons.length - 1 ? `<button onclick="loadLesson(${index + 1})" class="bg-yellow-500 hover:bg-yellow-400 text-black px-6 py-2 rounded font-bold">ุงูุชุงูู</button>` : ''}
                    </div>
                `;
            }

            // Animate Content
            contentArea.innerHTML = `
                <div class="lesson-content animate-fade-in">
                    ${mainContent}
                </div>
            `;

            // On mobile, close sidebar after selection
            if(window.innerWidth < 768) {
                sidebar.classList.add('translate-x-full');
            }
        }

        // GEMINI API FUNCTIONALITY
        async function askGemini(type) {
            const promptInput = type === 'idea' ? document.getElementById('aiPromptIdea') : document.getElementById('aiPromptFix');
            const btnText = type === 'idea' ? document.getElementById('btnTextIdea') : document.getElementById('btnTextFix');
            const userQuery = promptInput.value.trim();
            const outputContainer = document.getElementById('aiOutputContainer');
            const outputDiv = document.getElementById('aiOutput');

            if (!userQuery) return;

            // UI Loading State
            const originalText = btnText.innerText;
            btnText.innerText = "ุฌุงุฑู ุงูุชูููุฑ";
            btnText.classList.add('loading-dots');
            outputContainer.classList.remove('hidden');
            outputDiv.innerHTML = '<span class="text-gray-500">ุฌุงุฑู ุงูุงุชุตุงู ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู...</span>';

            // Construct System Prompt
            const systemInstruction = `
                You are an expert FiveM Map Developer and GTA V CodeWalker specialist. 
                Your goal is to help users design maps.
                If the user asks for 'Ideas' or 'Props', suggest specific GTA V prop names (e.g., prop_barrier_work06, v_ilev_cd_chair).
                If the user asks for 'Fixes', explain technical solutions for YMAPs, MLOs, manifests, or CodeWalker bugs.
                Answer in Arabic. Keep the tone helpful and technical but easy to understand.
                Format the output with clear bullet points.
            `;

            try {
                const response = await fetch(
                    `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`,
                    {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            contents: [{
                                parts: [{ text: `User request type: ${type}. Query: ${userQuery}` }]
                            }],
                            systemInstruction: {
                                parts: [{ text: systemInstruction }]
                            }
                        })
                    }
                );

                if (!response.ok) throw new Error('API Error');

                const data = await response.json();
                const aiText = data.candidates[0].content.parts[0].text;
                
                // Format plain text to simple HTML (bolding and newlines)
                const formattedText = aiText
                    .replace(/\*\*(.*?)\*\*/g, '<strong class="text-yellow-400">$1</strong>')
                    .replace(/\n/g, '<br>');

                outputDiv.innerHTML = formattedText;

            } catch (error) {
                console.error(error);
                outputDiv.innerHTML = '<span class="text-red-400">ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงูุงุชุตุงู ุจุงูุฎุงุฏู. ูุฑุฌู ุงููุญุงููุฉ ูุงุญูุงู.</span>';
            } finally {
                btnText.innerText = originalText;
                btnText.classList.remove('loading-dots');
            }
        }

        // Toggle Sidebar on Mobile
        menuBtn.addEventListener('click', () => {
            sidebar.classList.toggle('translate-x-full');
        });

        // Initialize
        renderNav();
        loadLesson(0);

    </script>
</body>
  </html>ู
