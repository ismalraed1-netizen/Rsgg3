<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø¹Ù…Ø± | ØªØ¹Ù„Ù… Ø¨Ø±Ù…Ø¬Ø© FiveM</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;900&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.0.2/marked.min.js"></script>
    <style>
        body { font-family: 'Tajawal', sans-serif; background-color: #0f172a; color: #e2e8f0; }
        
        /* Syntax Highlighting Mockup */
        .code-block {
            background: #1e1e1e;
            padding: 1.5rem;
            border-radius: 0.5rem;
            font-family: 'Consolas', 'Monaco', monospace;
            direction: ltr;
            overflow-x: auto;
            border: 1px solid #333;
            margin-top: 1rem;
            margin-bottom: 1rem;
        }
        .kw { color: #569cd6; } /* Keyword */
        .str { color: #ce9178; } /* String */
        .fn { color: #dcdcaa; } /* Function */
        .com { color: #6a9955; } /* Comment */

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #3b82f6; border-radius: 3px; }

        /* Animations */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .fade-in { animation: fadeIn 0.4s ease-out forwards; }
        
        .chat-bubble { max-width: 85%; padding: 10px 14px; border-radius: 12px; margin-bottom: 12px; font-size: 0.95rem; line-height: 1.6; word-wrap: break-word; }
        .chat-user { background: #3b82f6; color: white; align-self: flex-end; border-bottom-left-radius: 2px; }
        .chat-omar { background: #1e293b; color: #e2e8f0; border: 1px solid #334155; align-self: flex-start; border-bottom-right-radius: 2px; }
        
        /* Markdown Styles in Chat */
        .chat-omar pre { background: #000000; padding: 10px; border-radius: 5px; overflow-x: auto; margin-top: 5px; direction: ltr; }
        .chat-omar code { font-family: monospace; color: #a5f3fc; }
    </style>
</head>
<body class="h-screen flex flex-col overflow-hidden">

    <!-- Header -->
    <header class="bg-slate-900 border-b border-slate-700 h-16 flex items-center justify-between px-6 z-20 shadow-lg">
        <div class="flex items-center gap-3">
            <div class="bg-blue-600 p-2 rounded-lg"><i class="fas fa-graduation-cap text-white"></i></div>
            <h1 class="text-xl font-bold text-white tracking-wide">Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø¹Ù…Ø± <span class="text-blue-500 text-sm font-normal">| Ù„Ø¨Ø±Ù…Ø¬Ø© FiveM</span></h1>
        </div>
        <div class="text-xs text-gray-400 flex items-center gap-2">
            <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
            Ø§Ù„Ù…Ø¹Ù„Ù… Ø§Ù„Ø°ÙƒÙŠ Ù…ØªØµÙ„
        </div>
    </header>

    <!-- Main Layout -->
    <div class="flex-1 flex overflow-hidden">
        
        <!-- Sidebar (Lessons) -->
        <aside class="w-64 bg-slate-900 border-l border-slate-700 flex flex-col hidden md:flex">
            <div class="p-4 border-b border-slate-800">
                <h2 class="text-sm font-bold text-gray-400 uppercase">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¯Ø±ÙˆØ³</h2>
            </div>
            <nav class="flex-1 overflow-y-auto p-2 space-y-1" id="lessonList">
                <!-- Lessons injected by JS -->
            </nav>
            <div class="p-4 border-t border-slate-800 text-center text-xs text-gray-500">
                Ø¨Ø±Ù…Ø¬Ø© Ù…Ù† Ø§Ù„ØµÙØ± Ø­ØªÙ‰ Ø§Ù„Ø§Ø­ØªØ±Ø§Ù
            </div>
        </aside>

        <!-- Content Area -->
        <main class="flex-1 bg-slate-800 overflow-y-auto relative custom-scroll" id="mainContent">
            <!-- Dynamic Content Here -->
        </main>

        <!-- Omar AI Chat (Fixed Right Panel) -->
        <aside class="w-96 bg-slate-900 border-r border-slate-700 flex flex-col shadow-2xl z-10">
            <!-- Chat Header -->
            <div class="h-14 border-b border-slate-800 flex items-center px-4 gap-3 bg-slate-900">
                <div class="relative">
                    <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Omar&backgroundColor=b6e3f4" class="w-10 h-10 rounded-full border-2 border-blue-500" alt="Omar">
                    <div class="absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-slate-900"></div>
                </div>
                <div>
                    <h3 class="font-bold text-white text-sm">Ø§Ù„Ù…Ø¹Ù„Ù… Ø¹Ù…Ø±</h3>
                    <p class="text-[10px] text-blue-400">Ø®Ø¨ÙŠØ± Ø¨Ø±Ù…Ø¬Ø© & Ø³ÙƒØ±Ø¨ØªØ§Øª</p>
                </div>
            </div>

            <!-- Chat Messages -->
            <div id="chatHistory" class="flex-1 overflow-y-auto p-4 flex flex-col space-y-4 bg-slate-900/50">
                <div class="chat-bubble chat-omar fade-in">
                    ÙŠØ§ Ù‡Ù„Ø§ ÙˆØ§Ù„Ù„Ù‡! ğŸ‘‹ Ø£Ù†Ø§ Ø¹Ù…Ø±ØŒ Ù…Ø¯Ø±Ø¨Ùƒ Ø§Ù„Ø®Ø§Øµ ÙÙŠ Ø¨Ø±Ù…Ø¬Ø© ÙØ§ÙŠÙ Ø§Ù….
                    <br><br>
                    Ø£ÙŠ Ø´ÙŠ ÙŠØµØ¹Ø¨ Ø¹Ù„ÙŠÙƒ ÙÙŠ Ø§Ù„Ø¯Ø±ÙˆØ³ØŒ Ø£Ùˆ ØªØ¨ÙŠ ÙƒÙˆØ¯ Ù…Ø¹ÙŠÙ†ØŒ Ø£Ùˆ Ø¹Ù†Ø¯Ùƒ Ø®Ø·Ø£ (Error) ÙÙŠ Ø§Ù„ÙƒÙˆÙ†Ø³ÙˆÙ„.. Ø¨Ø³ Ø§Ø±Ø³Ù„Ù‡ Ù„ÙŠ Ù‡Ù†Ø§ ÙˆØ£Ù†Ø§ Ø£Ø¶Ø¨Ø·Ùƒ! ğŸ’»ğŸ”§
                </div>
            </div>

            <!-- Chat Input -->
            <div class="p-4 bg-slate-900 border-t border-slate-800">
                <div class="flex gap-2">
                    <input type="text" id="userMsg" class="flex-1 bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 text-sm text-white focus:outline-none focus:border-blue-500 transition dir-rtl" placeholder="Ø§Ø³Ø£Ù„ Ø¹Ù…Ø± Ø¹Ù† Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©..." onkeypress="handleEnter(event)">
                    <button onclick="sendMessage()" class="bg-blue-600 hover:bg-blue-500 text-white p-2 rounded-lg transition">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
                <div class="mt-2 flex gap-2 overflow-x-auto pb-1 custom-scroll">
                    <button onclick="quickAsk('ÙƒÙŠÙ Ø§Ø³ÙˆÙŠ Ø³ÙƒØ±Ø¨Øª ÙŠØ±Ø­Ø¨ Ø¨Ø§Ù„Ù„Ø§Ø¹Ø¨ØŸ')" class="text-[10px] bg-slate-800 hover:bg-slate-700 px-2 py-1 rounded text-gray-300 whitespace-nowrap border border-slate-700">ğŸ‘‹ Ø³ÙƒØ±Ø¨Øª ØªØ±Ø­ÙŠØ¨</button>
                    <button onclick="quickAsk('ÙˆØ´ ÙŠØ¹Ù†ÙŠ fxmanifest.luaØŸ')" class="text-[10px] bg-slate-800 hover:bg-slate-700 px-2 py-1 rounded text-gray-300 whitespace-nowrap border border-slate-700">ğŸ“„ Ù…Ù„Ù Ø§Ù„ØªØ¹Ø±ÙŠÙ</button>
                    <button onclick="quickAsk('Ø¹Ø·Ù†ÙŠ ÙƒÙˆØ¯ ÙŠØ±Ø³Ø¨Ù† Ø³ÙŠØ§Ø±Ø©')" class="text-[10px] bg-slate-800 hover:bg-slate-700 px-2 py-1 rounded text-gray-300 whitespace-nowrap border border-slate-700">ğŸš— ÙƒÙˆØ¯ Ø³ÙŠØ§Ø±Ø©</button>
                </div>
            </div>
        </aside>

    </div>

    <!-- Mobile Menu Button (Floating) -->
    <button onclick="document.querySelector('aside').classList.toggle('hidden')" class="md:hidden fixed bottom-4 left-4 bg-blue-600 text-white p-3 rounded-full shadow-lg z-50">
        <i class="fas fa-list"></i>
    </button>

    <script>
        // --- Curriculum Data ---
        const lessons = [
            {
                id: 1,
                title: "1. Ø§Ù„Ù…Ù‚Ø¯Ù…Ø©: ÙˆØ´ Ù‡ÙŠ ÙØ§ÙŠÙ Ø§Ù…ØŸ",
                icon: "fa-info-circle",
                content: `
                    <div class="max-w-3xl mx-auto p-8 fade-in">
                        <h1 class="text-3xl font-bold text-blue-400 mb-6">Ù…Ù‚Ø¯Ù…Ø© ÙÙŠ Ø¹Ø§Ù„Ù… Ø¨Ø±Ù…Ø¬Ø© FiveM</h1>
                        
                        <p class="text-gray-300 mb-4 text-lg">
                            Ø­ÙŠØ§Ùƒ Ø§Ù„Ù„Ù‡ ÙŠØ§ ÙˆØ­Ø´! Ù‚Ø¨Ù„ Ù…Ø§ Ù†ÙƒØªØ¨ Ø£ÙŠ ÙƒÙˆØ¯ØŒ Ù„Ø§Ø²Ù… ØªÙÙ‡Ù… Ø¥Ø­Ù†Ø§ ÙˆÙŠÙ† Ø¨Ù†Ø´ØªØºÙ„.
                            <br>
                            <strong>FiveM</strong> Ù‡Ùˆ Ø¹Ø¨Ø§Ø±Ø© Ø¹Ù† "Ù…Ø¹Ø¯Ù„" (Modification) Ù„Ù„Ø¹Ø¨Ø© GTA V ÙŠØ³Ù…Ø­ Ù„Ùƒ ØªØ³ÙˆÙŠ Ø³ÙŠØ±ÙØ±Ø§Øª Ø®Ø§ØµØ©ØŒ ÙˆØªØªØ­ÙƒÙ… ÙÙŠ ÙƒÙ„ Ø´ÙŠ ÙÙŠÙ‡Ø§.
                        </p>

                        <div class="bg-slate-700/50 p-4 rounded-lg border-r-4 border-blue-500 mb-6">
                            <h3 class="font-bold text-white mb-2">Ø§Ù„Ù„ØºØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©: Lua ğŸŒ™</h3>
                            <p class="text-sm text-gray-300">
                                Ø£ØºÙ„Ø¨ Ø¨Ø±Ù…Ø¬Ø© ÙØ§ÙŠÙ Ø§Ù… ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ù„ØºØ© Ø§Ø³Ù…Ù‡Ø§ <strong>Lua</strong>. Ù‡ÙŠ Ù„ØºØ© Ø³Ù‡Ù„Ø© Ø¬Ø¯Ø§Ù‹ ÙˆØ³Ø±ÙŠØ¹Ø©.
                                Ù„Ø§ ØªØ®Ø§Ù Ø¥Ø°Ø§ Ù…Ø§ ØªØ¹Ø±ÙÙ‡Ø§ØŒ Ø¨ØªØªØ¹Ù„Ù…Ù‡Ø§ Ù…Ø¹ÙŠ Ù‡Ù†Ø§ Ø®Ø·ÙˆØ© Ø¨Ø®Ø·ÙˆØ©!
                            </p>
                        </div>

                        <h3 class="text-xl font-bold text-white mt-8 mb-4">Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù„ÙŠ ØªØ­ØªØ§Ø¬Ù‡Ø§ (Ø§Ù„Ø¹Ø¯Ø© ğŸ› ï¸):</h3>
                        <ul class="list-disc list-inside text-gray-300 space-y-2">
                            <li><span class="text-blue-400">VS Code:</span> Ø£ÙØ¶Ù„ Ø¨Ø±Ù†Ø§Ù…Ø¬ ØªÙƒØªØ¨ ÙÙŠÙ‡ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯.</li>
                            <li><span class="text-blue-400">FiveM Server:</span> Ù…Ù„ÙØ§Øª Ø§Ù„Ø³ÙŠØ±ÙØ± Ø¹Ø´Ø§Ù† ØªØ¬Ø±Ø¨ Ø´ØºÙ„Ùƒ (Localhost).</li>
                            <li><span class="text-blue-400">XAMPP:</span> Ù„Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Ø¥Ø°Ø§ Ø¨ØªØ³ÙˆÙŠ Ø³ÙŠØ±ÙØ± Ø±ÙˆÙ„ Ø¨Ù„Ø§ÙŠ ÙƒØ¨ÙŠØ± Ù…Ø³ØªÙ‚Ø¨Ù„Ø§Ù‹).</li>
                        </ul>
                    </div>
                `
            },
            {
                id: 2,
                title: "2. Ù‡ÙŠÙƒÙ„Ø© Ø§Ù„Ù…Ù„ÙØ§Øª (Ø§Ù„Ø£Ø³Ø§Ø³)",
                icon: "fa-folder-open",
                content: `
                    <div class="max-w-3xl mx-auto p-8 fade-in">
                        <h1 class="text-3xl font-bold text-blue-400 mb-6">ÙƒÙŠÙ ØªØ±ØªØ¨ Ù…Ù„ÙØ§Øª Ø§Ù„Ø³ÙƒØ±Ø¨ØªØŸ</h1>
                        
                        <p class="text-gray-300 mb-4">
                            Ø£ÙŠ Ø³ÙƒØ±Ø¨Øª (Resource) ÙÙŠ ÙØ§ÙŠÙ Ø§Ù… Ù„Ø§Ø²Ù… ÙŠÙƒÙˆÙ† Ø¯Ø§Ø®Ù„ Ù…Ø¬Ù„Ø¯ Ø®Ø§Øµ ÙÙŠÙ‡ØŒ ÙˆÙ„Ø§Ø²Ù… ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù…Ù„Ù "Ø§Ù„Ù‡ÙˆÙŠØ©" Ø§Ù„Ù„ÙŠ Ø§Ø³Ù…Ù‡ <code class="bg-black px-1 rounded text-green-400">fxmanifest.lua</code>.
                        </p>

                        <h3 class="text-xl font-bold text-white mt-6">ØªØ±ØªÙŠØ¨ Ø§Ù„Ù…Ø¬Ù„Ø¯ ÙŠÙƒÙˆÙ† ÙƒØ°Ø§:</h3>
                        <div class="code-block text-sm">
myscript/          <-- Ø§Ø³Ù… Ù…Ø¬Ù„Ø¯ Ø§Ù„Ø³ÙƒØ±Ø¨Øª
â”œâ”€â”€ fxmanifest.lua <-- Ù…Ù„Ù Ø§Ù„ØªØ¹Ø±ÙŠÙ (Ø¥Ø¬Ø¨Ø§Ø±ÙŠ)
â”œâ”€â”€ client.lua     <-- Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù„ÙŠ ÙŠØ´ØªØºÙ„ Ø¹Ù†Ø¯ Ø§Ù„Ù„Ø§Ø¹Ø¨
â””â”€â”€ server.lua     <-- Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù„ÙŠ ÙŠØ´ØªØºÙ„ Ø¹Ù†Ø¯ Ø§Ù„Ø³ÙŠØ±ÙØ±
                        </div>

                        <h3 class="text-xl font-bold text-white mt-6">Ù…Ø­ØªÙˆÙ‰ fxmanifest.lua:</h3>
                        <p class="text-gray-400 text-sm mb-2">Ø§Ù†Ø³Ø® Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ ÙˆØ­Ø·Ù‡ ÙÙŠ Ù…Ù„Ù Ø§Ù„Ù…Ø§Ù†ÙŠØ³ÙØª Ø­Ù‚Ùƒ:</p>
                        <div class="code-block">
<span class="kw">fx_version</span> <span class="str">'cerulean'</span>
<span class="kw">game</span> <span class="str">'gta5'</span>

<span class="com">-- ÙˆØµÙ Ø§Ù„Ø³ÙƒØ±Ø¨Øª</span>
<span class="kw">description</span> <span class="str">'My First Script with Omar'</span>
<span class="kw">version</span> <span class="str">'1.0.0'</span>

<span class="com">-- ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ù„ÙØ§Øª</span>
<span class="kw">client_script</span> <span class="str">'client.lua'</span>
<span class="kw">server_script</span> <span class="str">'server.lua'</span>
                        </div>
                    </div>
                `
            },
            {
                id: 3,
                title: "3. Ø£ÙˆÙ„ ÙƒÙˆØ¯ Ù„Ùƒ (Hello World)",
                icon: "fa-code",
                content: `
                    <div class="max-w-3xl mx-auto p-8 fade-in">
                        <h1 class="text-3xl font-bold text-blue-400 mb-6">ÙƒØªØ§Ø¨Ø© Ø£ÙˆÙ„ ÙƒÙˆØ¯ (Client Side)</h1>
                        
                        <p class="text-gray-300 mb-4">
                            Ø®Ù„Ù†Ø§ Ù†Ø®Ù„ÙŠ Ø§Ù„Ù„Ø¹Ø¨Ø© ØªØ·Ø¨Ø¹ ÙƒÙ„Ø§Ù… ÙÙŠ Ø§Ù„ÙƒÙˆÙ†Ø³ÙˆÙ„ (F8).
                            Ø§ÙØªØ­ Ù…Ù„Ù <code class="bg-black px-1 rounded text-yellow-400">client.lua</code> ÙˆØ§ÙƒØªØ¨ Ø§Ù„ØªØ§Ù„ÙŠ:
                        </p>

                        <div class="code-block">
<span class="com">-- Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ ÙŠØ·Ø¨Ø¹ Ø±Ø³Ø§Ù„Ø© ÙÙŠ ÙƒÙˆÙ†Ø³ÙˆÙ„ Ø§Ù„Ù„Ø§Ø¹Ø¨ (F8)</span>
<span class="fn">print</span>(<span class="str">"ÙŠØ§ Ù‡Ù„Ø§! Ø§Ù„Ø³ÙƒØ±Ø¨Øª Ø§Ø´ØªØºÙ„ Ø¨Ù†Ø¬Ø§Ø­ ğŸ‰"</span>)

<span class="com">-- Ø£Ù…Ø± ÙƒØªØ§Ø¨ÙŠ: /hello</span>
<span class="fn">RegisterCommand</span>(<span class="str">'hello'</span>, <span class="kw">function</span>()
    <span class="fn">print</span>(<span class="str">'Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø³ÙŠØ±ÙØ±Ù†Ø§!'</span>)
<span class="kw">end</span>, <span class="kw">false</span>)
                        </div>

                        <div class="mt-6 bg-slate-700 p-4 rounded-lg">
                            <h4 class="font-bold text-white mb-2">ÙˆØ´ Ø³ÙˆÙŠÙ†Ø§ Ù‡Ù†Ø§ØŸ ğŸ¤”</h4>
                            <ul class="list-disc list-inside text-sm text-gray-300 space-y-2">
                                <li><strong>print:</strong> Ø¯Ø§Ù„Ø© ØªØ·Ø¨Ø¹ Ù†Øµ ÙÙŠ Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø³ÙˆØ¯Ø§Ø¡ (F8) Ù„Ù„ØªØ£ÙƒØ¯ Ø§Ù† Ø§Ù„ÙƒÙˆØ¯ Ø´ØºØ§Ù„.</li>
                                <li><strong>RegisterCommand:</strong> Ø¯Ø§Ù„Ø© Ù…Ù† ÙØ§ÙŠÙ Ø§Ù… ØªØ³Ù…Ø­ Ù„Ùƒ ØªØ³ÙˆÙŠ Ø£Ù…Ø± (Command) ÙŠÙƒØªØ¨Ù‡ Ø§Ù„Ù„Ø§Ø¹Ø¨ ÙÙŠ Ø§Ù„Ø´Ø§Øª Ø£Ùˆ F8.</li>
                            </ul>
                        </div>
                    </div>
                `
            },
            {
                id: 4,
                title: "4. Ø§Ù„Ù†ÙŠØªÙØ² (Natives) - Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ù„Ø¹Ø¨Ø©",
                icon: "fa-magic",
                content: `
                    <div class="max-w-3xl mx-auto p-8 fade-in">
                        <h1 class="text-3xl font-bold text-blue-400 mb-6">Ø§Ù„Ù†ÙŠØªÙØ² (Natives): Ø³Ø­Ø± GTA V</h1>
                        
                        <p class="text-gray-300 mb-4">
                            Ø§Ù„Ù†ÙŠØªÙØ² Ù‡ÙŠ Ø¯ÙˆØ§Ù„ Ø¬Ø§Ù‡Ø²Ø© Ù…Ù† Ø±ÙˆÙƒØ³ØªØ§Ø± ÙˆÙØ§ÙŠÙ Ø§Ù… ØªØªØ­ÙƒÙ… Ø¨Ø§Ù„Ù„Ø¹Ø¨Ø©. ØªØ¨ÙŠ ØªØ¹Ø·ÙŠ Ø³Ù„Ø§Ø­ØŸ ØªØ¨ÙŠ ØªØ±Ø³Ø¨Ù† Ø³ÙŠØ§Ø±Ø©ØŸ ØªØ¨ÙŠ ØªØºÙŠØ± Ø§Ù„Ø·Ù‚Ø³ØŸ ÙƒÙ„Ù‡Ø§ <strong>Natives</strong>.
                        </p>

                        <h3 class="text-xl font-bold text-white mt-6">Ù…Ø«Ø§Ù„: Ø¥Ø¹Ø·Ø§Ø¡ Ø³Ù„Ø§Ø­ ÙˆØ³ÙŠØ§Ø±Ø©</h3>
                        <div class="code-block">
<span class="fn">RegisterCommand</span>(<span class="str">'car'</span>, <span class="kw">function</span>(<span class="arg">source</span>, <span class="arg">args</span>)
    <span class="kw">local</span> ped = <span class="fn">PlayerPedId</span>() <span class="com">-- Ø¬ÙŠØ¨ Ø´Ø®ØµÙŠØ© Ø§Ù„Ù„Ø§Ø¹Ø¨</span>
    <span class="kw">local</span> vehicleName = args[1] <span class="kw">or</span> <span class="str">'adder'</span> <span class="com">-- Ø§Ø³Ù… Ø§Ù„Ø³ÙŠØ§Ø±Ø©</span>

    <span class="com">-- Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ØªØ­Ù…ÙŠÙ„ Ù…ÙˆØ¯ÙŠÙ„ Ø§Ù„Ø³ÙŠØ§Ø±Ø© (Ù…Ù‡Ù… Ø¬Ø¯Ø§Ù‹)</span>
    <span class="fn">RequestModel</span>(vehicleName)
    <span class="kw">while</span> <span class="kw">not</span> <span class="fn">HasModelLoaded</span>(vehicleName) <span class="kw">do</span>
        <span class="fn">Wait</span>(10)
    <span class="kw">end</span>

    <span class="com">-- Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø³ÙŠØ§Ø±Ø©</span>
    <span class="kw">local</span> veh = <span class="fn">CreateVehicle</span>(vehicleName, <span class="fn">GetEntityCoords</span>(ped), <span class="fn">GetEntityHeading</span>(ped), <span class="kw">true</span>, <span class="kw">false</span>)
    
    <span class="com">-- Ø±ÙƒØ¨ Ø§Ù„Ù„Ø§Ø¹Ø¨ ÙÙŠ Ø§Ù„Ø³ÙŠØ§Ø±Ø©</span>
    <span class="fn">SetPedIntoVehicle</span>(ped, veh, -1)
    
    <span class="com">-- Ø±Ø³Ø§Ù„Ø© ØªÙ†Ø¨ÙŠÙ‡</span>
    <span class="fn">print</span>(<span class="str">'Ù…Ø¨Ø±ÙˆÙƒ Ø§Ù„Ù…ÙˆØªØ±! ğŸš—'</span>)
<span class="kw">end</span>, <span class="kw">false</span>)
                        </div>
                        
                        <p class="text-sm text-gray-400 mt-2">
                            *Ø¬Ø±Ø¨ ØªÙƒØªØ¨ ÙÙŠ Ø§Ù„Ù„Ø¹Ø¨Ø© <code>/car zentorno</code> ÙˆØ´Ù ÙˆØ´ ÙŠØµÙŠØ±!
                        </p>
                    </div>
                `
            },
             {
                id: 5,
                title: "5. Ø§Ù„Ø£Ø­Ø¯Ø§Ø« (Events) - Ø§Ù„Ø§ØªØµØ§Ù„",
                icon: "fa-network-wired",
                content: `
                    <div class="max-w-3xl mx-auto p-8 fade-in">
                        <h1 class="text-3xl font-bold text-blue-400 mb-6">Ø§Ù„Ø£Ø­Ø¯Ø§Ø« (Events): Ø§Ù„ØªØ®Ø§Ø·Ø¨ Ø¨ÙŠÙ† Ø§Ù„Ù…Ù„ÙØ§Øª</h1>
                        
                        <p class="text-gray-300 mb-4">
                            ÙƒÙŠÙ ØªØ®Ù„ÙŠ Ù…Ù„Ù Client ÙŠÙƒÙ„Ù… ServerØŸ Ø¹Ù† Ø·Ø±ÙŠÙ‚ Ø§Ù„Ù€ Events.
                            <br>
                            Ù…Ø«Ù„Ø§Ù‹: Ø§Ù„Ù„Ø§Ø¹Ø¨ (Client) Ø§Ø´ØªØ±Ù‰ Ø´ÙŠØ¡ØŒ ÙŠØ±Ø³Ù„ Event Ù„Ù„Ø³ÙŠØ±ÙØ± (Server) Ø¹Ø´Ø§Ù† ÙŠØ®ØµÙ… Ø§Ù„ÙÙ„ÙˆØ³ Ù…Ù† Ø§Ù„Ø¯Ø§ØªØ§Ø¨ÙŠØ³.
                        </p>

                        <h3 class="text-xl font-bold text-white mt-6">Client Side (Ø§Ù„Ù…Ø±Ø³Ù„):</h3>
                        <div class="code-block">
<span class="com">-- Ù†Ø±Ø³Ù„ ØªØ±ÙŠÙØ± Ù„Ù„Ø³ÙŠØ±ÙØ± Ø¨Ø§Ø³Ù… 'payMoney'</span>
<span class="fn">TriggerServerEvent</span>(<span class="str">'omar:payMoney'</span>, 500)
                        </div>

                        <h3 class="text-xl font-bold text-white mt-6">Server Side (Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„):</h3>
                        <div class="code-block">
<span class="fn">RegisterNetEvent</span>(<span class="str">'omar:payMoney'</span>)
<span class="fn">AddEventHandler</span>(<span class="str">'omar:payMoney'</span>, <span class="kw">function</span>(<span class="arg">amount</span>)
    <span class="kw">local</span> src = source <span class="com">-- Ø§ÙŠØ¯ÙŠ Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ù„ÙŠ Ø£Ø±Ø³Ù„</span>
    <span class="fn">print</span>(<span class="str">'Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø±Ù‚Ù… '</span> .. src .. <span class="str">' Ø¯ÙØ¹ Ù…Ø¨Ù„Øº: '</span> .. amount)
    <span class="com">-- Ù‡Ù†Ø§ Ù†Ø­Ø· ÙƒÙˆØ¯ Ø®ØµÙ… Ø§Ù„ÙÙ„ÙˆØ³ Ø§Ù„ÙØ¹Ù„ÙŠ</span>
<span class="kw">end</span>)
                        </div>
                    </div>
                `
            }
        ];

        // --- Init Logic ---
        function renderLessons() {
            const list = document.getElementById('lessonList');
            lessons.forEach(lesson => {
                const btn = document.createElement('div');
                btn.className = 'flex items-center gap-3 p-3 rounded-lg cursor-pointer hover:bg-slate-800 transition text-gray-300 hover:text-white lesson-item';
                btn.innerHTML = `<i class="fas ${lesson.icon} text-blue-500 w-5"></i> <span class="text-sm font-medium">${lesson.title}</span>`;
                btn.onclick = () => loadLesson(lesson.id);
                list.appendChild(btn);
            });
        }

        function loadLesson(id) {
            const lesson = lessons.find(l => l.id === id);
            const main = document.getElementById('mainContent');
            main.innerHTML = lesson.content;
            
            // Highlight active lesson in sidebar
            document.querySelectorAll('.lesson-item').forEach(el => el.classList.remove('bg-blue-900/30', 'border-r-4', 'border-blue-500'));
            // Note: Simple highlighting logic, ideally matched by index or id
        }

        // --- AI "Omar" Logic ---
        const apiKey = "AIzaSyDIZ-c5Br5QSoT3W8LGGy2d5-oISvjyD2w";
        let isTyping = false;

        function quickAsk(msg) {
            document.getElementById('userMsg').value = msg;
            sendMessage();
        }

        function handleEnter(e) {
            if(e.key === 'Enter') sendMessage();
        }

        async function sendMessage() {
            if(isTyping) return;
            const input = document.getElementById('userMsg');
            const text = input.value.trim();
            if(!text) return;

            addMessage(text, 'user');
            input.value = '';
            
            isTyping = true;
            const typingId = addTypingIndicator();

            try {
                const response = await callGemini(text);
                removeMessage(typingId);
                addMessage(response, 'omar');
            } catch (error) {
                removeMessage(typingId);
                addMessage("Ù…Ø¹Ù„ÙŠØ´ ÙŠØ§ ÙˆØ­Ø´ØŒ ØµØ§Ø± Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„. Ø¬Ø±Ø¨ Ù…Ø±Ø© Ø«Ø§Ù†ÙŠØ©! ğŸ”Œ", 'omar');
                console.error(error);
            } finally {
                isTyping = false;
            }
        }

        function addMessage(text, sender) {
            const div = document.createElement('div');
            div.className = `chat-bubble ${sender === 'user' ? 'chat-user' : 'chat-omar'} fade-in`;
            
            if(sender === 'omar') {
                // Parse Markdown for code blocks
                div.innerHTML = marked.parse(text);
            } else {
                div.innerText = text;
            }
            
            const chatBox = document.getElementById('chatHistory');
            chatBox.appendChild(div);
            chatBox.scrollTop = chatBox.scrollHeight;
            return div;
        }

        function addTypingIndicator() {
            const div = document.createElement('div');
            div.className = 'chat-bubble chat-omar text-xs text-gray-400 animate-pulse';
            div.innerText = 'Ø¹Ù…Ø± ÙŠÙƒØªØ¨ Ø§Ù„ÙƒÙˆØ¯...';
            div.id = 'typingIndicator';
            document.getElementById('chatHistory').appendChild(div);
            document.getElementById('chatHistory').scrollTop = document.getElementById('chatHistory').scrollHeight;
            return 'typingIndicator';
        }

        function removeMessage(id) {
            const el = document.getElementById(id);
            if(el) el.remove();
        }

        async function callGemini(prompt) {
            const systemPrompt = `
                Ø£Ù†Øª "Ø¹Ù…Ø±"ØŒ Ù…Ø¨Ø±Ù…Ø¬ Ø®Ø¨ÙŠØ± ÙÙŠ FiveM ÙˆÙ…Ø¹Ù„Ù… Ù„Ù„Ù…Ø¨ØªØ¯Ø¦ÙŠÙ†.
                Ù„ØºØªÙƒ: Ø¹Ø±Ø¨ÙŠØ© (Ù„Ù‡Ø¬Ø© Ø³Ø¹ÙˆØ¯ÙŠØ©/Ø®Ù„ÙŠØ¬ÙŠØ© ÙˆØ¯ÙŠØ©).
                Ù…Ù‡Ù…ØªÙƒ: ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø±Ù…Ø¬Ø© Lua Ù„Ù€ FiveM.
                
                Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø±Ø¯:
                1. Ø§Ø´Ø±Ø­ Ø§Ù„Ù…ÙØ§Ù‡ÙŠÙ… Ø¨Ø¨Ø³Ø§Ø·Ø© ÙƒØ£Ù†Ùƒ ØªØ´Ø±Ø­ Ù„ØµØ¯ÙŠÙ‚Ùƒ.
                2. Ø¥Ø°Ø§ Ø·Ù„Ø¨ ÙƒÙˆØ¯ØŒ Ø§ÙƒØªØ¨Ù‡ Ø¯Ø§Ø®Ù„ Markdown Code Block Ù…Ø¹ ØªØ¹Ù„ÙŠÙ‚Ø§Øª ØªØ´Ø±Ø­ Ø§Ù„ÙƒÙˆØ¯ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠ.
                3. Ø±ÙƒØ² Ø¹Ù„Ù‰ Natives Ø§Ù„Ù…Ø´Ù‡ÙˆØ±Ø© ÙˆÙƒÙŠÙÙŠØ© Ø§Ø³ØªØ®Ø¯Ø§Ù… Events.
                4. Ø¥Ø°Ø§ Ø³Ø£Ù„Ùƒ Ø¹Ù† Ø®Ø·Ø£ (Error)ØŒ Ø§Ø´Ø±Ø­ Ø³Ø¨Ø¨Ù‡ ÙˆÙƒÙŠÙ ÙŠØ­Ù„Ù‡.
                5. Ù„Ø§ ØªØ®Ø±Ø¬ Ø¹Ù† Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© ÙˆÙØ§ÙŠÙ Ø§Ù….
                
                Ø£Ù…Ø«Ù„Ø© Ù„Ù„Ø±Ø¯:
                - "Ø£Ø¨Ø´Ø± Ø¨Ø¹Ø²Ùƒ! Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ Ø¹Ø´Ø§Ù† ØªØ±Ø³Ø¨Ù† Ø³ÙŠØ§Ø±Ø©.."
                - "ÙŠØ§ ØºØ§Ù„ÙŠØŒ Ù†Ø³ÙŠØª ØªØ­Ø· 'end' ÙÙŠ Ø¢Ø®Ø± Ø§Ù„ÙØ§Ù†ÙƒØ´Ù†."
                - "Ø´ÙˆÙØŒ Ø§Ù„Ù€ Client Ù…Ø§ ÙŠÙ‚Ø¯Ø± ÙŠÙƒÙ„Ù… Ø§Ù„Ø¯Ø§ØªØ§Ø¨ÙŠØ³ Ù…Ø¨Ø§Ø´Ø±Ø©ØŒ Ù„Ø§Ø²Ù… ÙŠÙƒÙ„Ù… Ø§Ù„Ø³ÙŠØ±ÙØ± Ø£ÙˆÙ„."
            `;

            const response = await fetch(
                `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`,
                {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: prompt }] }],
                        systemInstruction: { parts: [{ text: systemPrompt }] }
                    })
                }
            );

            if(!response.ok) throw new Error("API Error");
            const data = await response.json();
            return data.candidates[0].content.parts[0].text;
        }

        // Load first lesson
        renderLessons();
        loadLesson(1);

    </script>
</body>
    </html>
